<html>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.5.2/bluebird.core.min.js"></script>
  <div id="root">
  </div>

  <script>
    const size = 30;

    const count = size * size;

    const root = document.getElementById('root');

    for (let i = 0; i < size; ++i) {
      const line = document.createElement('div');
      line.style = 'display: flex;';

      for (let j = 0; j < size; ++j) {
        const child = document.createElement('div');
        child.style = 'width: 30px; height: 30px; border-style: solid; border-width: 1px;';
        child.id = i * size + j;

        line.appendChild(child);
      }
      root.appendChild(line);
    }

    for (let number = 0; number < count; ++number) {
      fetch(`/numbers/${number}`)
        .then(response => response.json())
        .then((obj) => {
          const { value: number } = obj;

          const node = document.getElementById(number);
          node.innerHTML = number + 1;
        })
        .catch((error) => {
          console.error(number, error);
        });
    }
  </script>
</html>
